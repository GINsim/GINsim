<?xml version="1.0"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"> 

<section id="sec_editRegGraph">
	<?dbhtml filename="editRegulatoryGraph.html"?>
	<title>Editing the regulatory graph</title>
	<para> Regulatory graphs can be interactively modified: genes and interactions can be added,
		removed and their properties redefined. Elements can be added, depending on the current
		editing mode: <informaltable>
			<tgroup cols="2">
				<colspec colname="c1"/>
				<colspec colname="c2"/>
				<thead>
					<row>
						<entry namest="c1" nameend="c2">Available editing modes for regulatory
							graphs</entry>
					</row>
				</thead>
				<tbody>
					<row><entry><inlinegraphic fileref="../figures/buttons/deletemode.gif" /></entry>
						<entry>Deletion option: selected items are deleted.</entry></row>
					<row><entry><inlinegraphic fileref="../figures/buttons/editmode.gif" /></entry>
						<entry>Default editing mode: allows to select and move objects.</entry></row>
					<row><entry><inlinegraphic fileref="../figures/buttons/insertsquare.gif" /></entry>
						<entry>Gene insertion mode: when selected, clicking on the graph panel adds a new gene.</entry></row>
					<row>
						<entry>
							<inlinegraphic fileref="../figures/buttons/insertpositiveedge.gif" />
							<inlinegraphic fileref="../figures/buttons/insertnegativeedge.gif" />
							<inlinegraphic fileref="../figures/buttons/insertunknownedge.gif" />
							</entry>
						<entry>Interaction insertion mode: when selected, interactions are added by dragging from one gene to another. The interactions must be complemented by the definition of the logical parameters for the target variable (see below). The three buttons allow to add different kinds of interactions: activation, inhibition or undefined.</entry></row>
					<row><entry><inlinegraphic fileref="../figures/buttons/custumizeedgerouting.gif" /></entry>
						<entry>Arc modification mode: when selected, intermediate points can be added or removed.</entry></row>
					</tbody>
			</tgroup>
		</informaltable></para>
		<note><simpara>The terms <emphasis>gene</emphasis> and <emphasis>interaction</emphasis>
		are used through this document, but nodes of the regulatory graph can represent other types of 
		<emphasis>regulatory components</emphasis>, <emphasis>e.g.</emphasis> proteins,
		 or yet global cellular characteristics such as cell mass. 
		Similarly, arcs can denote transcriptional regulations but also protein phosphorylation, degradation, 
		complex formation...</simpara></note>
	<section id="sec_notes">
		<title id="notes">Annotations</title>
		<para>Annotations can be attached to the different components of the regulatory graph:</para>
		<itemizedlist>
			<listitem>
				<simpara>the graph itself,</simpara>
			</listitem>
			<listitem>
				<simpara>genes,</simpara>
			</listitem>
			<listitem>
				<simpara>interactions.</simpara>
			</listitem>
		</itemizedlist>
		<para>An annotation is composed of a textual comment and a list of URLs.</para>
		<figure id="fig_notes">
			<title>Annotations</title>
			<mediaobject>
				<imageobject><imagedata fileref="../figures/annotation.png"/></imageobject>
				<caption>
					<simpara>The same <emphasis>Note panel</emphasis> is used for all elements
						supporting notes. This screenshot shows this panel in the
							<emphasis>Graph Attributes</emphasis> tab.</simpara>
				</caption>
			</mediaobject>
		</figure>
	</section>
	<section id="sec_geneOrder">
		<title>Gene order</title>
		<para>Genes are always ordered in GINsim. This order has no effect on the regulatory 
		graph itself but may affect the (partial) simulation and the state transition graph (the same 
		order being used in the states names). The default order follows the chronology of node additions.
		This order can be modified using the arrows on the left side of the <emphasis>Graph Attributes</emphasis> tab.</para>
		<figure id="fig_geneOrder">
			<title>Changing gene order</title>
			<mediaobject>
				<imageobject>
					<imagedata id="orderAnim" fileref="../figures/node_order.png"/>
				</imageobject>
				<caption>
					<para>The left part of the <emphasis>Graph Attributes</emphasis> tab of a
						regulatory graph lists all genes of the model and allows to modify their
						order. The "up" and "down" buttons move selected genes in the
					list.</para>
				</caption>
			</mediaobject>
		</figure>
		<tip>
			<para>In all lists, several elements can be selected using the
				<emphasis>ctrl</emphasis> key (<emphasis>apple/cmd</emphasis> key on Mac OS X)
				 or <emphasis>shift</emphasis> key.</para>
			<para>Several lists can be reordered using the "up" and "down" buttons.</para>
		</tip>
	</section>
	<section id="sec_geneAttr">
		<title>Gene attributes</title>
		<para>When a single gene is selected, the <emphasis>Modelling Attributes</emphasis> tab
			allows to define its properties:</para>
		<itemizedlist>
			<listitem>
				<simpara><emphasis>Name</emphasis>: long name of the gene, optional.</simpara>
			</listitem>
			<listitem>
				<simpara><emphasis>Id</emphasis>: identifier of the gene, appears in the graph
					and must be unique.</simpara>
			</listitem>
			<listitem>
				<simpara><emphasis>Max value</emphasis>: the maximal expression level of the
					gene. The default value is 1 (boolean case). It can be increased to generate
					multi-valued genes.</simpara>
			</listitem>
			<listitem>
				<simpara><emphasis>Basal value</emphasis>: the value towards which the node
					tends when none of its regulators is active. The default value is
				0.</simpara>
			</listitem>
			<listitem>
				<simpara><emphasis>Logical parameters</emphasis>: define the dynamical evolution
					of the expression level depending on the active incoming
				interactions.</simpara>
			</listitem>
		</itemizedlist>
		<figure id="fig_geneAttr">
			<title>Attributes of a gene</title>
			<mediaobject>
				<imageobject>
					<imagedata id="fig_nodeSetting" fileref="../figures/geneConfig.png"/>
				</imageobject>
				<caption>
					<para>Properties of the gene Cro, as defined in the
						<emphasis>lambda4</emphasis> model (used in the 
						<olink targetdoc="tutorial">tutorial</olink> and available in the 
						<ulink url="http://gin.univ-mrs.fr/GINsim/model_repository.html">model repository</ulink>.</para>
				</caption>
			</mediaobject>
		</figure>
		<note>
			<simpara>The <emphasis>Modelling Attributes</emphasis> tab is divided into two
				parts. The <emphasis>Annotations</emphasis> and <emphasis>Parameters</emphasis>
				buttons (bottom left) respectively select <link linkend="notes">annotations</link> and
					<link linkend="sec_logicalParameters">logical parameters</link> editing.</simpara>
		</note>
		<section id="sec_logicalParameters">
			<title>Logical parameters</title>
			<para>When a gene is selected, <emphasis role="strong">logical parameters</emphasis>
				for this gene can be defined in the right part of the
					<emphasis>Modelling Attribute</emphasis> tab. The panel dedicated to the
				definition of logical parameters is divided into three parts: <itemizedlist>
					<listitem>
						<simpara>On the left, a table lists all defined logical parameters,
							showing their values and related interactions.</simpara>
					</listitem>
					<listitem>
						<simpara>On the right, the list of all incoming interactions on the
							selected gene.</simpara>
					</listitem>
					<listitem>
						<simpara>The central part contains the following buttons:</simpara>
						<itemizedlist>
							<listitem>
								<simpara>"&lt;&lt;" assigns the set of selected incoming
									interactions (from the right list) to the selected logical
									parameter,</simpara>
							</listitem>
							<listitem>
								<simpara>"X" deletes the selected logical
								parameter(s),</simpara>
							</listitem>
							<listitem>
								<simpara>"up" and "down" arrows reorder the selected logical
									parameters.</simpara>
							</listitem>
						</itemizedlist>
					</listitem>
				</itemizedlist></para>
			<figure id="fig_defLogParam">
				<title>Definition of non zero parameters for C1</title>
				<mediaobject id="logPara">
					<imageobject>
						<imagedata fileref="../figures/configuredInteraction.png"/>
					</imageobject>
					<caption>
						<para condition="html"><ulink condition="html"
								url="javascript:show('logPara')">Show animation</ulink></para>
						<para>The logical parameter panel, showing all parameters for C1.</para>
					</caption>
				</mediaobject>
			</figure>
			<tip>
				<itemizedlist>
					<listitem>
						<simpara>While logical parameters can be numerous, usually many of them
							take the value zero. To ease parameter definition, only non-zero
							parameters have to be defined in GINsim.</simpara>
					</listitem>
					<listitem>
						<simpara>Adding the same set of interactions twice is impeded.</simpara>
					</listitem>
					<listitem>
						<simpara>The set of interactions associated to a logical parameter can
							be modified: select the parameter and the corresponding set of
							interactions will be selected in the right list. This set can then
							be modified, and the "&lt;&lt;" button applies changes. If the new
							interaction set is already defined in the list of logical
							parameters, nothing is changed.</simpara>
					</listitem>
					<listitem>
						<simpara>To add a new logical parameter when an existing one is already
							selected, select the empty line at the bottom of the list.</simpara>
					</listitem>
				</itemizedlist>
			</tip>
		</section>
	</section>
	<section id="sec_interaction">
		<title>Interactions</title>
		<para>When a single arc is selected, the <emphasis>Modelling Attributes</emphasis> tab
			allows to define its properties</para>
		<figure id="fig_arcAttr">
			<title>Properties of an arc</title>
			<mediaobject>
				<imageobject>
					<imagedata id="fig_edgeConfig" fileref="../figures/interactionConfig.png"/>
				</imageobject>
				<caption>
					<para>Properties of the Cro-N arc in the <emphasis>lambda4</emphasis>
					model.</para>
				</caption>
			</mediaobject>
		</figure>
		<para> Depending on its activity level, a gene may have different effects on another one.
		The corresponding arc then contains several interactions, listed on the left. <itemizedlist>
				<listitem>
					<simpara>The "+" button adds an interaction.</simpara>
				</listitem>
				<listitem>
					<simpara>The "X" button deletes the selected interaction.</simpara>
				</listitem>
				<listitem>
					<simpara>Properties of the selected interaction can de defined: </simpara>
					<itemizedlist>
						<listitem>
							<simpara><emphasis>Min</emphasis> and <emphasis>Max</emphasis>
								define its <emphasis>range of activity</emphasis>. The
								interaction is <emphasis role="strong">active</emphasis> when
								the activity level of its source gene is in this
							range.</simpara>
						</listitem>
						<listitem>
							<simpara role="newline"><emphasis>Sign</emphasis>: 
								an interaction can be labelled as an activation, an inhibition or unknown.
								This is only a visual hint, as the real effects of interactions are defined
								through <link linkend="sec_logicalParameters">logical
								parameters.</link></simpara>
						</listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist></para>
	</section>
	<section id="sec_modelIntegrity">
		<title>Model integrity</title>
		<para>GINsim keeps the definition of regulatory graphs consistent: <itemizedlist>
				<listitem>
					<simpara>When an interaction is deleted, all logical parameters in which it
						was involved are also deleted.</simpara>
				</listitem>
				<listitem>
					<simpara>When the max value of a node is decreased, interactions and logical
						parameters are checked and, if necessary, updated silently to avoid
						inconsistencies.</simpara>
				</listitem>
			</itemizedlist> These automatic changes are necessary to keep the model valid, but
			they can alter it. Keep in mind that you need to double-check parameters after
			performing such changes.</para>
		<important>
			<simpara>When a gene has several actions on another one, the activation ranges of
				these interactions should usually be disjoint, but GINsim does not check this
				property.</simpara>
		</important>
		<para role="lineBreak">Checking activation intervals of interactions and the correctness
			of logical parameters is left to the user as adding more controls generates more
			annoyances than real help. Invalid logical parameters are highlighted to ease their
			detection. Keep in mind that a change in the activation-range of one of the
			interactions can turn a valid logical parameter into an ill-defined one. Parameters
			involving interactions from the same source with disjoint activity ranges 
			are also ill-defined and thus highlighted for correction.</para>
	</section>
</section>

